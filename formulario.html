<div class="form-container">
    <form id="projectForm" onsubmit="submitForm(event)">
        <div class="form-grid">
            
            <div class="form-group">
                <label for="nota">Número da Nota</label>
                <input type="text" id="nota" name="nota" placeholder="Ex: 925510256" required>
            </div>

            <div class="form-group">
                <label for="status">Status da Nota</label>
                <select id="status" name="status" required>
                    <option value="" disabled selected>Selecione...</option>
                    <option value="APROVADO">APROVADO</option>
                    <option value="REPROVADO">REPROVADO</option>
                </select>
            </div>

            <div class="form-group">
                <label for="empresa">Nome da Empresa</label>
                <input type="text" id="empresa" name="empresa" placeholder="Ex: NEOENERGIA FIBRA" required>
            </div>

            <div class="form-group">
                <label for="cnpj">CNPJ</label>
                <input type="text" id="cnpj" name="cnpj" placeholder="00.000.000/0000-00" maxlength="18" oninput="mascaraCNPJ(this)" required>
            </div>

            <div class="form-group">
                <label for="municipio">Município da Obra</label>
                <input type="text" id="municipio" name="municipio" placeholder="Ex: RECIFE" required>
            </div>

            <div class="form-group">
                <label for="responsavel">Responsável Técnico</label>
                <input type="text" id="responsavel" name="responsavel" required>
            </div>

            <div class="form-group">
                <label for="email">E-mail para Contato</label>
                <input type="email" id="email" name="email" placeholder="exemplo@dominio.com" required>
            </div>

            <div class="form-group">
                <label for="data">Data de Análise</label>
                <input type="date" id="data" name="data" required>
            </div>

            <div class="form-group">
                <label for="pontos_novos">Qnt. Pontos Novos</label>
                <input type="number" id="pontos_novos" name="pontos_novos" min="0" value="0">
            </div>

            <div class="form-group">
                <label for="pontos_agrupados">Qnt. Pontos Agrupados</label>
                <input type="number" id="pontos_agrupados" name="pontos_agrupados" min="0" value="0">
            </div>

            <div class="form-group">
                <label for="equip_faturados">Equipamentos Faturados</label>
                <input type="number" id="equip_faturados" name="equip_faturados" min="0" value="0">
            </div>

            <div class="form-group">
                <label for="etapa">Análise de Etapa</label>
                <input type="number" id="etapa" name="etapa" min="1" value="1">
            </div>

            <div class="form-group">
                <label for="projeto_5g">Projeto 5G?</label>
                <select id="projeto_5g" name="projeto_5g">
                    <option value="NAO">NÃO</option>
                    <option value="SIM">SIM</option>
                </select>
            </div>
        </div>

        <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="document.getElementById('projectForm').reset()">Limpar</button>
            <button type="submit" class="btn-save">
                <i data-lucide="save"></i> Salvar Nota
            </button>
        </div>
    </form>
</div>

<style>
    /* Container do Formulário */
    .form-container {
        background: #fff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.03);
        max-width: 900px; /* Limita a largura para não ficar esticado demais */
        margin: 0 auto; /* Centraliza */
    }

    /* Layout em Grid (2 colunas) */
    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    /* Responsividade: 1 coluna em telas pequenas */
    @media (max-width: 768px) {
        .form-grid { grid-template-columns: 1fr; }
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    /* Estilo dos Labels */
    label {
        font-size: 0.85rem;
        font-weight: 600;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.03em;
    }

    /* Estilo dos Inputs e Selects */
    input, select {
        padding: 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 0.95rem;
        color: #334155;
        outline: none;
        transition: all 0.2s;
        background-color: #f8fafc;
    }

    input:focus, select:focus {
        border-color: var(--primary-color);
        background-color: #fff;
        box-shadow: 0 0 0 3px rgba(0, 163, 53, 0.1);
    }

    /* Divisor de Seção */
    .form-divider {
        grid-column: 1 / -1; /* Ocupa as duas colunas */
        border-bottom: 2px solid #f1f5f9;
        padding-bottom: 10px;
        margin: 20px 0 10px 0;
        color: var(--primary-color);
        font-weight: 700;
        font-size: 1.1rem;
    }

    /* Botões */
    .form-actions {
        margin-top: 30px;
        display: flex;
        justify-content: flex-end;
        gap: 15px;
        border-top: 1px solid #f1f5f9;
        padding-top: 20px;
    }

    .btn-save {
        background-color: var(--primary-color);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: background 0.2s;
    }

    .btn-save:hover { background-color: #008f2e; }

    .btn-cancel {
        background-color: transparent;
        color: #64748b;
        border: 1px solid #e2e8f0;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .btn-cancel:hover { background-color: #f1f5f9; color: #334155; }
</style>

<script>
    
    lucide.createIcons();

    function mascaraCNPJ(i) {
        // 1. Remove tudo o que não é número (bloqueia letras)
        let v = i.value.replace(/\D/g, "");
        
        // 2. Coloca o ponto entre o segundo e o terceiro dígitos
        v = v.replace(/^(\d{2})(\d)/, "$1.$2");
        
        // 3. Coloca o ponto entre o quinto e o sexto dígitos
        v = v.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
        
        // 4. Coloca uma barra entre o oitavo e o nono dígitos
        v = v.replace(/\.(\d{3})(\d)/, ".$1/$2");
        
        // 5. Coloca um hífen depois do bloco de quatro dígitos
        v = v.replace(/(\d{4})(\d)/, "$1-$2");

        // 6. Atualiza o valor no campo
        i.value = v;
    }

    function submitForm(event) {
        event.preventDefault(); // Impede o recarregamento da página

        // Aqui futuramente colocaremos o código Python/JS para salvar no Banco de Dados
        
        // Simulação visual de salvamento
        const btn = document.querySelector('.btn-save');
        const originalText = btn.innerHTML;
        
        btn.innerHTML = '<i data-lucide="check"></i> Salvo!';
        btn.style.backgroundColor = '#059669'; // Um verde mais escuro
        lucide.createIcons();

        setTimeout(() => {
            alert("Nota registrada com sucesso! (Simulação)");
            document.getElementById('projectForm').reset();
            btn.innerHTML = originalText;
            btn.style.backgroundColor = '';
            lucide.createIcons();
        }, 500);
    }
</script>